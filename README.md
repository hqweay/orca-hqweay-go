# 虎鲸笔记插件：恐龙工具箱

这是一个为 Orca Note (虎鲸笔记) 开发的增强插件集合，提供了一系列实用的工具来提升笔记体验。

## 虎鲸笔记入坑大礼包

从数据导入到发布，从格式化到排序，从样式清除到快捷标签，应有尽有。

1. 刚入坑，从其它笔记软件导入数据？markdown 文件一键导入，其它笔记软件的数据库/多维表格通过 csv 导入。
2. 插件安装？提供插件市集，精彩的插件等你发现，一键安装。
3. 格式化？一键格式化，修正中英文标点符号，优化中英文混排空格，规范化全角/半角字符。
4. 从网页剪藏的富文本内容统一为笔记内样式？一键清除样式，移除行内样式，移除链接，移除空格。
5. 任务管理？一键对已完成/未完成任务进行排序。
6. 博客发布？一键发布 Github Pages，自动上传图片，自动维护元数据。
7. Life Log？使用快捷键一键插入标签，为块打上时间戳。
8. 快捷标签？一键打标签，自动附加属性，支持多选属性合并。
9. 语音笔记？一键同步 voicenotes.com 的语音笔记，自动归档，支持增量同步和全量同步。

## 这使你充满了决心

这是一只恐龙，路过的人必须夸它可爱。

## 使用

1. 下载 Release 包，package.zip。
2. 解压后，将文件夹复制到 Orca Note 的插件目录。

## 功能列表

此插件集包含以下子插件，均可在设置中单独开启或是使用：

### 1. 📝 一键格式化 (Format Block)

标准化当前块及其子块的文本格式：

- 自动修正中英文标点符号。
- 优化中英文混排空格。
- 规范化全角/半角字符。

### 2. 🎙️ VoiceNotes 同步

将 [VoiceNotes](https://voicenotes.com/) 的录音笔记同步到虎鲸笔记中：

- 支持增量同步和全量同步。
- 自动归档到指定的 "VoiceNotes Inbox"。

### 3. 📂 导入工具 (Import)

- **文件夹导入**：支持批量导入文件夹中的 Markdown 文件。
- **CSV 导入**：
  - **多模板映射**：支持为同一个 CSV 文件配置多个标签模板。
  - **智能解析**：自动处理日期（DateTime）、多选（TextChoices）等复杂属性。
  - **双向插入**：既可以插入到指定页面，也可以直接导入到“每日笔记”。

### 4. 🧹 样式清除 (Remove Style)

快速清理笔记内容的格式：

- **移除行内样式**：清除加粗、高亮等富文本样式。
- **移除链接**：将链接转换为纯文本。
- **移除空格**：将空行（且无子节点）删除。

### 5. 🔃 块排序 (Sort Blocks)

对选中的多个块进行智能排序：

- **可配置顺序**：支持自定义排序规则（默认：空块 -> 普通块 -> 已完成任务 -> 未完成任务）。
- **字典序排列**：同类块内部按文本内容字典序排列。
- **多选触发**：仅当选中 2 个及以上块时才显示菜单。

### 6. 📤 发布到 GitHub (Publish)

将 Orca 笔记一键发布为 Markdown 博客文章：

- **图床集成**：自动提取文中图片并上传到指定的 GitHub 仓库（支持去重复用）。
- **博客部署**：将 Markdown 内容推送到博客仓库（适配 Hexo/Jekyll/Hugo 等）。
- **智能元数据**：
  - 自动生成 Frontmatter。
  - 记录 `github_url` 和 `blog_url`（可点击）。
  - 自动维护 `publish_date` 创建时间。
  - 仅对页面块（Page Block）生效。

### 7. 🏪 插件市集 (Bazaar)

Orca 的社区插件市场，发现更多可能：

- **浏览与安装**：直接在应用内浏览并一键安装社区插件。
- **自动管理**：支持插件的更新与卸载。
- **贡献生态**：欢迎开发者提交自己的插件到市集。

### 8. 🏷️ 快捷标签 (Quick Tag)

提升标签录入效率的专属工具：

- **一键标记**：为常用标签配置快捷键，在光标处秒速插入。
- **默认属性**：插入时自动附加属性（如：状态、优先级），支持多选属性合并。
- **剪贴板粘贴**：
  - 支持 `{ type: "orca-tags", tags: [...], content: ... }` 标准格式。
  - **富文本内容**：支持在打标签的同时插入带格式或链接的 ContentFragment。
```json
{
  "type": "orca-tags",
  "content": [
    { "t": "t", "v": "Check our " },
    { "t": "l", "v": "Orca Documentation", "l": "https://orca.so/docs" }
  ],
  "tags": [
    {
      "任务标签": [
        {
          "name": "状态",
          "type": 6,
          "value": ["进行中", "高优先级"]
        },
        {
          "name": "进度",
          "type": 3,
          "value": 75
        },
        {
          "name": "已归档",
          "type": 4,
          "value": false
        },
        {
          "name": "参考链接",
          "type": 1,
          "value": "https://leay.net",
          "typeArgs": { "subType": "link" }
        },
        {
          "name": "封面",
          "type": 1,
          "value": "https://raw.githubusercontent.com/hqweay/picbed/master/img/avatar/avatar.png",
          "typeArgs": { "subType": "image" }
        }
      ]
    }
  ]
}
```

## 开发说明

本项目采用模块化架构：

- `src/lets-*`：每个目录对应一个子插件。
- `BasePlugin`：所有插件继承自基类，统一管理加载、卸载和日志。
- `main.tsx`：负责动态加载所有子插件。

## License

WTFPL
